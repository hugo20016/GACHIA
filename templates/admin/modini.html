<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="icon" type="image/x-icon" href="/assets/a.png" />

  <title>Panel de configuración | Anarte</title>

  <!-- Custom fonts for this template-->
  <link href="/admin/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css" />
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet" />

  <!-- Custom styles for this template-->
  <link href="/admin/css/sb-admin-2.min.css" rel="stylesheet" />
</head>

<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/be/admin/control_panel">
          <div class="logo">
              <img src="/assets/a_white.png" />
          </div>
          <div class="sidebar-brand-text mx-3">CONFIGURACIÓN</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li class="nav-item ">
          <a class="nav-link" href="/be/admin/control_panel">
              <i class="fas fa-fw fa-chart-area"></i>
              <span>Estadísticas</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
          Herramientas
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item active">
          <a class="nav-link" href="/be/admin/modificar_contenido">
              <i class="fas fa-fw fa-cog"></i>
              <span>Paginas Web</span></a>
      </li>


      <!-- Nav Item - Utilities Collapse Menu -->
      <li class="nav-item">
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities"
              aria-expanded="true" aria-controls="collapseUtilities">
              <i class="fas fa-fw fa-wrench"></i>
              <span>Archivos</span>
          </a>
          <div id="collapseUtilities" class="collapse" aria-labelledby="headingUtilities"
              data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                  <h6 class="collapse-header">Opciones:</h6>
                  <a class="collapse-item" href="/be/admin/admin_qr">Administrar Archivos</a>
                  <a class="collapse-item" href="/be/admin/upload_qr">Subir elemento</a>
              </div>
          </div>
      </li>
      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block">

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
          <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>



  </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content">
        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                    <!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">







                        <div class="topbar-divider d-none d-sm-block"></div>

                        <!-- Nav Item - User Information -->
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">{{USUARIO}}</span>
                                <img class="img-profile rounded-circle" src="/admin/img/undraw_profile.svg">
                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="userDropdown">


                                <!--<a class="dropdown-item" href="#">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Profile
                                </a>
                            
                                <div class="dropdown-divider"></div>
                                -->


                                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Cerrar sesíon
                                </a>
                            </div>
                        </li>

                    </ul>

                </nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid cambios">
          <form>
            <h1>Descripción general</h1>
            <textarea id="desc1" name="descripcion" rows="5" cols="50">{{Desc_general}}</textarea>
            <br>
            <button type="button" onclick="actualizar_desc(1)">Guardar</button>

            <h1>Quienes somos</h1>
            <textarea id="desc2" name="quienes_somos" rows="5" cols="50">{{Desc_quienes}}</textarea>
            <br>
            <button type="button" onclick="actualizar_desc(2)">Guardar</button>

            <h1>Servicios</h1>
            <textarea id="desc3" name="servicios" rows="5" cols="50">{{Desc_servicios}}</textarea>
            <br>
            <button type="button" onclick="actualizar_desc(3)">Guardar</button>



          </form>

          <h1>Fotos</h1>
            <div class="row dt-row">
              <div class="col-sm-12">
                <!-- Creamos un form que llame a /be/actualizar_img envie en metodo post los datos y el archivo que suba.
                      -> Input Posicion_img: dropdown con valores de 1 a 6
                      -> Input Img_file: el archivo que desea enviar al servidor-->
                <form action="/be/admin/actualizar_img" method="post" enctype="multipart/form-data">
                  <div class="form-group">
                    <label for="Posicion_img">Posición de la imagen</label>
                    <select class="form-control" id="Posicion_img" name="id">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="Img_file">Imagen</label>
                    <input type="file" class="form-control-file" id="Img_file" name="Img_file">
                    <small id="fileHelp" class="form-text text-muted">Solo se aceptan archivos .jpg, .jpeg, .png y .gif</small>
                  </div>
                  <button type="submit" class="btn btn-primary">Actualizar</button>
                </form>


              </div>
            </div>

            
          <form>
            <h1>Colaboradores</h1>
            <input type="text" placeholder="Nombre" id="nombre_colab_nuevo">
            <input type="text" placeholder="Link" id="link_colab_nuevo">
            <button type="button" onclick="agregar_colab()">Agregar</button>
           
          </form>
          <br>
          <div class="row dt-row">
            <div class="col-sm-12">
              <table id="Tabla_qr" class="table table-striped dataTable" style="width: 100%;"
                aria-describedby="example_info">
                <thead>
                  <tr>
                    <th class="sorting sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1"
                      aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 136px;">
                      Nombre</th>
                    <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1"
                      aria-label="Position: activate to sort column ascending" style="width: 218px;">Link</th>
                    <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1"
                      aria-label="Position: activate to sort column ascending" style="width: 218px;">Acciones</th>
                  </tr>
                </thead>
                <tbody>

                  {% for item in colaboradores %}
                  {% if loop.index is odd %}
                  <tr class="odd">
                    {% else %}
                  <tr class="even">
                    {% endif %}
                    <td class="sorting_1"><input type="text" value="{{item['Nombre']}}" id="nombre{{item['id']}}"></td>
                    <td><input type="text" value="{{item['Link']}}" id="link{{loop.index}}"></td>
                    <td><button onclick="guardar({{item['id']}})">Guardar</button><button
                        onclick="eliminar({{item['id']}})">Eliminar</button></td>
                  </tr>
                  {% endfor %}


                </tbody>
              </table>



            </div>
          </div>
        </div>
      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2021</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">
            ¿Seguro que quieres salir?
          </h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          Pulsa en salir si deseas cerrar la Sesión
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">
            Cancel
          </button>
          <a class="btn btn-primary" href="/be/admin/logout">Salir</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="/admin/vendor/jquery/jquery.min.js"></script>
  <script src="/admin/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="/admin/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="/admin/js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="/admin/vendor/chart.js/Chart.min.js"></script>

  <!-- Page level custom scripts 
    <script src="/admin/js/demo/chart-area-demo.js"></script>
    <script src="/admin/js/demo/chart-pie-demo.js"></script>-->

  <script>
    var pagina_principal = 1;

    function SearchElement() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("Buscador");
      filter = input.value.toUpperCase();
      table = document.getElementById("Tabla_qr");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }

    function ShowPage(page) {
      console.log("Pagina selecionada: " + page);
      var table, tr, td, i, txtValue, disp_size;
      table = document.getElementById("Tabla_qr");
      tr = table.getElementsByTagName("tr");
      disp_size = document.getElementById("selector").value;

      pagina_principal = page;
      var first = (page - 1) * disp_size;
      var last = page * disp_size;

      //Recorremos la tabla y ocultamos todos los elementos que no esten en el rango de la pagina
      for (i = 0; i < tr.length; i++) {
        if (i >= first && i < last) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }

      var prev_page, next_page;

      //Obtenemos el numero de elementos a mostrar
      var disp_size = document.getElementById("selector").value;
      //obtenemos el numero de elementos de la tabla
      var size_table = document.getElementById("Tabla_qr").getElementsByTagName("tr").length;
      //Calculamos el numero de paginas
      var num_pages = Math.ceil(size_table / disp_size);
      //Obtenemos el elemento donde se mostraran las paginas
      var pages = document.getElementById("Selector_Pagina");
      //Limpiamos el elemento
      pages.innerHTML = "";

      //Creamos el elemento para la pagina anterior que debe estar deshabilitado
      var prev = document.createElement("li");
      if (num_pages > 1 && page > 1) {
        prev.className = "page-item";
      } else {
        prev.className = "page-item disabled";
      }
      var prev_link = document.createElement("a");
      prev_link.className = "page-link";
      prev_link.href = "#";
      prev_link.innerHTML = "Anterior";
      prev_page = pagina_principal - 1;
      prev_link.onclick = function () {
        ShowPage(prev_page);
      }
      prev.appendChild(prev_link);
      pages.appendChild(prev);

      //Creamos los elementos para las paginas
      for (var i = 1; i <= num_pages; i++) {

        if (i == page) {
          var page = document.createElement("li");
          page.className = "page-item active";
          var page_link = document.createElement("a");
          page_link.className = "page-link";
          page_link.href = "#";
          page_link.innerHTML = i;
          page_link.onclick = function () {
            ShowPage(this.innerHTML);
          }
          page.appendChild(page_link);
          pages.appendChild(page);
          continue;
        }
        else {
          var page = document.createElement("li");
          page.className = "page-item";
          var page_link = document.createElement("a");
          page_link.className = "page-link";
          page_link.href = "#";
          page_link.innerHTML = i;
          page_link.onclick = function () {
            ShowPage(this.innerHTML);
          }
          page.appendChild(page_link);
          pages.appendChild(page);
        }

      }

      //Creamos el elemento para la pagina siguiente que debe estar habilitado solo si hay mas de una pagina
      var next = document.createElement("li");
      if (num_pages > 1 && pagina_principal < num_pages) {
        next.className = "page-item";
      } else {
        next.className = "page-item disabled";
      }
      var next_link = document.createElement("a");
      next_link.className = "page-link";
      next_link.href = "#";
      next_link.innerHTML = "Siguiente";
      next_page = pagina_principal + 1;
      next_link.onclick = function () {
        ShowPage(next_page);
      }
      next.appendChild(next_link);
      pages.appendChild(next);

      //Escribimos el texto de la pagina actual  info_tabla
      var info_tabla = document.getElementById("info_tabla");
      info_tabla.innerHTML = "Mostrando " + first + "-" + last + " de " + size_table + " elementos";





    }

    function SizeSelector() {
      pagina_principal = 1;
      ShowPage(1);
    }

    function on_load() {
      ShowPage(1);
    }

    function eliminar(id) {
      fetch('/be/admin/Eliminar_colaboradores?id=' + id);
      location.reload();
    }

    function guardar(id) {
      var Nombre = document.getElementById("nombre" + id).value;
      var Link = document.getElementById("link" + id).value;

      Nombre = encodeURI(Nombre);
      Link = encodeURI(Link);
      window.location.href = "/be/admin/actualizar_colaborador?id=" + id + "&nombre=" + Nombre + "&link=" + Link;

    }

    function agregar_colab() {
      var Nombre = document.getElementById("nombre_colab_nuevo").value;
      var Link = document.getElementById("link_colab_nuevo").value;

      Nombre = encodeURI(Nombre);
      Link = encodeURI(Link);
      window.location.href = "/be/admin/agregar_colaborador?nombre=" + Nombre + "&link=" + Link;

    }

    function actualizar_desc(index){
      var desc = document.getElementById("desc"+index).value;
      desc = encodeURI(desc);
      window.location.href = "/be/admin/actualizar_desc?index="+index+"&desc="+desc;
    }
    


  </script>

 
 
</body>

</html>